# ç”µå•†è£…ä¿®å¼•æ“æ¶æ„è®¾è®¡æ–‡æ¡£

## 1. æ¶æ„æ¦‚è§ˆ

### 1.1 ç³»ç»Ÿæ¶æ„

ç”µå•†è£…ä¿®å¼•æ“é‡‡ç”¨ **ç»„ä»¶åŒ– + é…ç½®é©±åŠ¨** çš„æ¶æ„è®¾è®¡ï¼ŒåŸºäº Nuxt 4 + Vue 3 + TypeScript æŠ€æœ¯æ ˆï¼Œæ”¯æŒå¯è§†åŒ–æ‹–æ‹½è£…ä¿®å’Œå®æ—¶é¢„è§ˆã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           åå°ç®¡ç†ç³»ç»Ÿ (CSR)                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ é¡µé¢ç®¡ç†æ¨¡å—  â”‚  â”‚ ç»„ä»¶åº“æ¨¡å—    â”‚  â”‚ æ‹–æ‹½ç”»å¸ƒæ¨¡å—  â”‚  â”‚ å±æ€§ç¼–è¾‘æ¨¡å—  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           è£…ä¿®å¼•æ“æ ¸å¿ƒ                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ç»„ä»¶æ³¨å†Œä¸­å¿ƒ  â”‚  â”‚ ç»„ä»¶æ¸²æŸ“å™¨    â”‚  â”‚ é…ç½®ç®¡ç†      â”‚  â”‚ é¡µé¢æ„å»ºå™¨    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å‰å°å±•ç¤ºç³»ç»Ÿ (SSR)                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ é¡µé¢æ¸²æŸ“æ¨¡å—  â”‚  â”‚ ç»„ä»¶åŠ è½½å™¨    â”‚  â”‚ æ•°æ®é¢„å–      â”‚  â”‚ ç¼“å­˜ç®¡ç†      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒç‰¹æ€§

- **å¯è§†åŒ–æ‹–æ‹½**ï¼šé€šè¿‡æ‹–æ‹½æ–¹å¼å¿«é€Ÿæ„å»ºé¡µé¢
- **ç»„ä»¶åŒ–è®¾è®¡**ï¼šæ¨¡å—åŒ–ç»„ä»¶ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **å®æ—¶é¢„è§ˆ**ï¼šæ‰€è§å³æ‰€å¾—çš„é¢„è§ˆæ•ˆæœ
- **å“åº”å¼å¸ƒå±€**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰ç»„ä»¶å±æ€§å’Œè¡Œä¸º
- **è‡ªåŠ¨æ³¨å†Œ**ï¼šåŸºäºç›®å½•ç»“æ„è‡ªåŠ¨æ³¨å†Œç»„ä»¶
- **å¤šç¯å¢ƒæ”¯æŒ**ï¼šåå° CSR + å‰å° SSR

## 2. ç›®å½•ç»“æ„

### 2.1 æ ¸å¿ƒç›®å½•ç»“æ„

```
app/
â”œâ”€â”€ components/                    # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ builder/                  # è£…ä¿®å¼•æ“ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/           # è£…ä¿®ç»„ä»¶åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ banner/           # å¹¿å‘Šæ¨ªå¹…ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ carousel/         # è½®æ’­å›¾ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ navbar/           # å¯¼èˆªæ ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ product-list/     # äº§å“åˆ—è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # ç»„ä»¶æ³¨å†Œä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ property-editors/     # å±æ€§ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ BuilderComponentRenderer.vue   # ç»„ä»¶æ¸²æŸ“å™¨
â”‚   â”‚   â””â”€â”€ BuilderPropertyEditor.vue      # å±æ€§ç¼–è¾‘å™¨
â”‚   â””â”€â”€ ComponentRenderer.vue     # å‰å°ç»„ä»¶æ¸²æŸ“å™¨
â”œâ”€â”€ composables/                   # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useComponentRegistry.ts   # ç»„ä»¶æ³¨å†Œç®¡ç†
â”‚   â”œâ”€â”€ useComponentRenderer.ts   # ç»„ä»¶æ¸²æŸ“é€»è¾‘
â”‚   â””â”€â”€ usePageManager.ts          # é¡µé¢ç®¡ç†
â”œâ”€â”€ types/                         # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ component-builder.ts       # ç»„ä»¶æ„å»ºç›¸å…³ç±»å‹
â”œâ”€â”€ pages/                         # é¡µé¢
â”‚   â”œâ”€â”€ builder.vue                # è£…ä¿®é¡µé¢
â”‚   â””â”€â”€ preview/                   # é¢„è§ˆé¡µé¢
â””â”€â”€ stores/                        # çŠ¶æ€ç®¡ç†
    â””â”€â”€ pageStore.ts               # é¡µé¢é…ç½®å­˜å‚¨
```

### 2.2 ç»„ä»¶ç›®å½•è§„èŒƒ

æ¯ä¸ªè£…ä¿®ç»„ä»¶å¿…é¡»éµå¾ªä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
components/builder/components/
â””â”€â”€ [ç»„ä»¶å]/             # ç»„ä»¶ç›®å½•åï¼ˆä½¿ç”¨ kebab-caseï¼‰
    â”œâ”€â”€ index.vue         # ç»„ä»¶å®ç°
    â””â”€â”€ index.config.ts   # ç»„ä»¶é…ç½®
```

## 3. ç»„ä»¶ç³»ç»Ÿè®¾è®¡

### 3.1 ç»„ä»¶ç±»å‹å®šä¹‰

ç»„ä»¶å®šä¹‰éµå¾ª `ComponentDefinition` æ¥å£ï¼š

```typescript
interface ComponentDefinition {
  type: string                    // ç»„ä»¶ç±»å‹æ ‡è¯†
  name: string                    // ç»„ä»¶æ˜¾ç¤ºåç§°
  icon: string                    // ç»„ä»¶å›¾æ ‡
  description: string             // ç»„ä»¶æè¿°
  category: ComponentCategory     // ç»„ä»¶åˆ†ç±»
  defaultProps: Record<string, any>  // é»˜è®¤å±æ€§
  propertySchema: Record<string, PropertySchema>  // å±æ€§é…ç½® schema
  preview: string                 // é¢„è§ˆå›¾
  tags: string[]                  // æ ‡ç­¾
}
```

### 3.2 ç»„ä»¶åˆ†ç±»

| åˆ†ç±»        | æè¿°               | ç¤ºä¾‹ç»„ä»¶           |
|-------------|--------------------|--------------------|
| layout      | å¸ƒå±€ç»„ä»¶           | ç½‘æ ¼å¸ƒå±€ã€å®¹å™¨     |
| content     | å†…å®¹ç»„ä»¶           | æ–‡æœ¬ã€å›¾ç‰‡ã€å¯Œæ–‡æœ¬ |
| navigation  | å¯¼èˆªç»„ä»¶           | å¯¼èˆªæ ã€èœå•       |
| promotion   | ä¿ƒé”€ç»„ä»¶           | æ¨ªå¹…ã€ä¼˜æƒ åˆ¸       |
| product     | äº§å“ç»„ä»¶           | äº§å“åˆ—è¡¨ã€æ¨è     |
| custom      | è‡ªå®šä¹‰ç»„ä»¶         | è‡ªå®šä¹‰ä¸šåŠ¡ç»„ä»¶     |

### 3.3 å±æ€§ç±»å‹

æ”¯æŒçš„å±æ€§ç¼–è¾‘ç±»å‹ï¼š

| ç±»å‹       | æè¿°               | é€‚ç”¨åœºæ™¯           | å¯¹åº”ç¼–è¾‘å™¨         |
|------------|--------------------|--------------------|--------------------|
| string     | æ–‡æœ¬è¾“å…¥           | æ ‡é¢˜ã€é“¾æ¥ç­‰       | StringInput        |
| number     | æ•°å­—è¾“å…¥           | æ•°é‡ã€å¤§å°ç­‰       | NumberInput        |
| boolean    | å¸ƒå°”å€¼             | å¼€å…³ã€æ˜¾ç¤º/éšè—ç­‰  | BooleanSwitch      |
| select     | ä¸‹æ‹‰é€‰æ‹©           | é€‰é¡¹ã€å¯¹é½æ–¹å¼ç­‰   | SelectInput        |
| image      | å›¾ç‰‡ä¸Šä¼            | å›¾ç‰‡è·¯å¾„           | ImageUpload        |
| textarea   | å¤šè¡Œæ–‡æœ¬           | æè¿°ã€å†…å®¹ç­‰       | TextareaInput      |
| color      | é¢œè‰²é€‰æ‹©           | èƒŒæ™¯è‰²ã€æ–‡å­—è‰²ç­‰   | ColorInput         |
| array      | æ•°ç»„ç±»å‹           | è½®æ’­å›¾ã€åˆ—è¡¨ç­‰     | ArrayInput         |
| object     | å¯¹è±¡ç±»å‹           | å¤æ‚é…ç½®           | è‡ªå®šä¹‰ç¼–è¾‘å™¨       |

## 4. ç»„ä»¶åˆ›å»ºæµç¨‹

### 4.1 æ­¥éª¤ 1ï¼šåˆ›å»ºç»„ä»¶ç›®å½•

1. åœ¨ `components/builder/components/` ä¸‹åˆ›å»ºç»„ä»¶ç›®å½•ï¼Œä½¿ç”¨ kebab-case å‘½å
2. ç›®å½•åå³ä¸ºç»„ä»¶ç±»å‹æ ‡è¯†ç¬¦

### 4.2 æ­¥éª¤ 2ï¼šç¼–å†™ç»„ä»¶é…ç½®æ–‡ä»¶

åˆ›å»º `index.config.ts` æ–‡ä»¶ï¼Œå®šä¹‰ç»„ä»¶çš„é…ç½®ä¿¡æ¯ï¼š

```typescript
// components/builder/components/example-component/index.config.ts
import type { ComponentDefinition } from '~/types/component-builder'

export const exampleComponentConfig: ComponentDefinition = {
  type: 'example-component',
  name: 'ç¤ºä¾‹ç»„ä»¶',
  icon: 'ğŸ“¦',
  description: 'è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ç»„ä»¶',
  category: 'content',
  defaultProps: {
    title: 'ç¤ºä¾‹æ ‡é¢˜',
    content: 'ç¤ºä¾‹å†…å®¹',
    showButton: true
  },
  propertySchema: {
    title: {
      label: 'æ ‡é¢˜',
      type: 'string',
      placeholder: 'è¾“å…¥æ ‡é¢˜',
      required: true
    },
    content: {
      label: 'å†…å®¹',
      type: 'textarea',
      placeholder: 'è¾“å…¥å†…å®¹',
      rows: 3
    },
    showButton: {
      label: 'æ˜¾ç¤ºæŒ‰é’®',
      type: 'boolean',
      default: true
    }
  },
  preview: 'https://picsum.photos/800/400',
  tags: ['ç¤ºä¾‹', 'å†…å®¹']
}
```

### 4.3 æ­¥éª¤ 3ï¼šç¼–å†™ç»„ä»¶å®ç°

åˆ›å»º `index.vue` æ–‡ä»¶ï¼Œå®ç°ç»„ä»¶çš„æ¸²æŸ“é€»è¾‘ï¼š

```vue
<!-- components/builder/components/example-component/index.vue -->
<template>
  <div class="example-component">
    <h2>{{ props.title }}</h2>
    <p>{{ props.content }}</p>
    <button v-if="props.showButton">ç‚¹å‡»æŒ‰é’®</button>
  </div>
</template>

<script setup lang="ts">
defineProps<{
  title: string
  content: string
  showButton: boolean
}>()
</script>

<style scoped>
.example-component {
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 8px;
}
</style>
```

### 4.4 æ­¥éª¤ 4ï¼šæ³¨å†Œç»„ä»¶

åœ¨ `components/builder/components/index.ts` ä¸­æ·»åŠ ç»„ä»¶ç›®å½•ï¼š

```typescript
// components/builder/components/index.ts
export const componentDirectories = [
  // ç°æœ‰ç»„ä»¶
  { name: 'banner', path: 'builder/components/banner' },
  { name: 'carousel', path: 'builder/components/carousel' },
  
  // æ–°å¢ç»„ä»¶
  { name: 'example-component', path: 'builder/components/example-component' }
]
```

### 4.5 æ­¥éª¤ 5ï¼šéªŒè¯ç»„ä»¶

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
2. è®¿é—® `/builder` é¡µé¢
3. åœ¨ç»„ä»¶åº“ä¸­æŸ¥æ‰¾æ–°åˆ›å»ºçš„ç»„ä»¶
4. æ‹–æ‹½åˆ°ç”»å¸ƒä¸­éªŒè¯åŠŸèƒ½

## 5. å±æ€§ç¼–è¾‘ç³»ç»Ÿ

### 5.1 å±æ€§ç¼–è¾‘å™¨æ˜ å°„

| å±æ€§ç±»å‹   | å¯¹åº”ç¼–è¾‘å™¨ç»„ä»¶         | è·¯å¾„                                    |
|------------|------------------------|-----------------------------------------|
| string     | StringInput.vue        | components/builder/property-editors/     |
| number     | NumberInput.vue        | components/builder/property-editors/     |
| boolean    | BooleanSwitch.vue      | components/builder/property-editors/     |
| select     | SelectInput.vue        | components/builder/property-editors/     |
| textarea   | TextareaInput.vue      | components/builder/property-editors/     |
| color      | ColorInput.vue         | components/builder/property-editors/     |
| image      | ImageUpload.vue        | components/builder/property-editors/     |
| array      | ArrayInput.vue         | components/builder/property-editors/     |

### 5.2 è‡ªå®šä¹‰å±æ€§ç¼–è¾‘å™¨

å¦‚éœ€åˆ›å»ºè‡ªå®šä¹‰å±æ€§ç¼–è¾‘å™¨ï¼š

1. åœ¨ `components/builder/property-editors/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ç¼–è¾‘å™¨ç»„ä»¶
2. åœ¨ `BuilderPropertyEditor.vue` ä¸­æ³¨å†Œæ–°çš„ç¼–è¾‘å™¨ç±»å‹
3. åœ¨ç»„ä»¶çš„ `propertySchema` ä¸­ä½¿ç”¨æ–°çš„ç±»å‹

## 6. é¡µé¢é…ç½®ç³»ç»Ÿ

### 6.1 é¡µé¢é…ç½®ç»“æ„

```typescript
interface PageConfig {
  id: string                    // é¡µé¢ ID
  name: string                  // é¡µé¢åç§°
  slug: string                  // é¡µé¢è·¯å¾„
  title: string                 // é¡µé¢æ ‡é¢˜
  description: string           // é¡µé¢æè¿°
  keywords: string              // é¡µé¢å…³é”®è¯
  components: ComponentConfig[] // ç»„ä»¶é…ç½®åˆ—è¡¨
  status: 'draft' | 'published' | 'archived' // é¡µé¢çŠ¶æ€
  createdAt: Date               // åˆ›å»ºæ—¶é—´
  updatedAt: Date               // æ›´æ–°æ—¶é—´
}
```

### 6.2 ç»„ä»¶é…ç½®ç»“æ„

```typescript
interface ComponentConfig {
  id: string                    // ç»„ä»¶å®ä¾‹ ID
  type: string                  // ç»„ä»¶ç±»å‹
  props: Record<string, any>    // ç»„ä»¶å±æ€§
  position: number              // ç»„ä»¶ä½ç½®
  style?: Record<string, any>   // ç»„ä»¶æ ·å¼
  customClass?: string          // è‡ªå®šä¹‰ç±»å
  createdAt: Date               // åˆ›å»ºæ—¶é—´
  updatedAt: Date               // æ›´æ–°æ—¶é—´
}
```

## 7. æ¸²æŸ“ç³»ç»Ÿ

### 7.1 åå°æ¸²æŸ“

åå°è£…ä¿®é¡µé¢ä½¿ç”¨ `BuilderComponentRenderer.vue` è¿›è¡Œç»„ä»¶æ¸²æŸ“ï¼Œæ”¯æŒå®æ—¶ç¼–è¾‘å’Œé¢„è§ˆã€‚

### 7.2 å‰å°æ¸²æŸ“

å‰å°é¡µé¢ä½¿ç”¨ `ComponentRenderer.vue` è¿›è¡Œç»„ä»¶æ¸²æŸ“ï¼ŒåŸºäºä¿å­˜çš„é¡µé¢é…ç½®ã€‚

### 7.3 é¢„è§ˆç³»ç»Ÿ

é¢„è§ˆé¡µé¢é€šè¿‡ `/preview/[...slug]` è·¯ç”±å®ç°ï¼Œæ”¯æŒå®æ—¶æŸ¥çœ‹è£…ä¿®æ•ˆæœã€‚

## 8. å¼€å‘æœ€ä½³å®è·µ

### 8.1 ç»„ä»¶å¼€å‘è§„èŒƒ

1. **å‘½åè§„èŒƒ**ï¼š
   - ç»„ä»¶ç›®å½•ï¼škebab-caseï¼ˆå¦‚ `product-list`ï¼‰
   - ç»„ä»¶ç±»å‹ï¼škebab-caseï¼ˆå¦‚ `product-list`ï¼‰
   - é…ç½®å¯¼å‡ºï¼šcamelCase + Configï¼ˆå¦‚ `productListConfig`ï¼‰

2. **å±æ€§è®¾è®¡**ï¼š
   - åˆç†è®¾ç½®é»˜è®¤å€¼
   - æ˜ç¡®å¿…å¡«å­—æ®µ
   - æä¾›é€‚å½“çš„éªŒè¯

3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨ `defineAsyncComponent` æŒ‰éœ€åŠ è½½
   - åˆç†ä½¿ç”¨ `v-memo` ç¼“å­˜æ¸²æŸ“
   - é¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œç›‘å¬å™¨

### 8.2 è¡¨å•ç»„ä»¶ä½¿ç”¨æŒ‡å—

1. **StringInput**ï¼šé€‚ç”¨äºçŸ­æ–‡æœ¬è¾“å…¥
   ```typescript
   {
     type: 'string',
     label: 'æ ‡é¢˜',
     placeholder: 'è¾“å…¥æ ‡é¢˜',
     required: true
   }
   ```

2. **TextareaInput**ï¼šé€‚ç”¨äºé•¿æ–‡æœ¬è¾“å…¥
   ```typescript
   {
     type: 'textarea',
     label: 'æè¿°',
     placeholder: 'è¾“å…¥æè¿°',
     rows: 4
   }
   ```

3. **NumberInput**ï¼šé€‚ç”¨äºæ•°å­—è¾“å…¥
   ```typescript
   {
     type: 'number',
     label: 'æ•°é‡',
     min: 1,
     max: 100,
     default: 1
   }
   ```

4. **BooleanSwitch**ï¼šé€‚ç”¨äºå¼€å…³ç±»å‹
   ```typescript
   {
     type: 'boolean',
     label: 'æ˜¾ç¤º',
     default: true
   }
   ```

5. **SelectInput**ï¼šé€‚ç”¨äºé€‰æ‹©ç±»å‹
   ```typescript
   {
     type: 'select',
     label: 'å¯¹é½æ–¹å¼',
     options: [
       { value: 'left', label: 'å·¦å¯¹é½' },
       { value: 'center', label: 'å±…ä¸­' },
       { value: 'right', label: 'å³å¯¹é½' }
     ],
     default: 'center'
   }
   ```

6. **ColorInput**ï¼šé€‚ç”¨äºé¢œè‰²é€‰æ‹©
   ```typescript
   {
     type: 'color',
     label: 'èƒŒæ™¯é¢œè‰²',
     default: '#ffffff'
   }
   ```

7. **ImageUpload**ï¼šé€‚ç”¨äºå›¾ç‰‡ä¸Šä¼ 
   ```typescript
   {
     type: 'string', // æ³¨æ„ï¼šä½¿ç”¨ string ç±»å‹å­˜å‚¨å›¾ç‰‡ URL
     label: 'å›¾ç‰‡',
     placeholder: 'ä¸Šä¼ å›¾ç‰‡æˆ–è¾“å…¥ URL'
   }
   ```

8. **ArrayInput**ï¼šé€‚ç”¨äºæ•°ç»„ç±»å‹
   ```typescript
   {
     type: 'array',
     label: 'è½®æ’­é¡¹',
     default: [],
     // æ•°ç»„é¡¹çš„ schema
     items: {
       type: 'object',
       properties: {
         image: {
           type: 'string',
           label: 'å›¾ç‰‡'
         },
         title: {
           type: 'string',
           label: 'æ ‡é¢˜'
         }
       }
     }
   }
   ```

## 9. æ‰©å±•ç³»ç»Ÿ

### 9.1 è‡ªå®šä¹‰ç»„ä»¶åº“

1. **åˆ›å»ºæ’ä»¶**ï¼šåœ¨ `plugins/` ç›®å½•ä¸‹åˆ›å»ºç»„ä»¶æ³¨å†Œæ’ä»¶
2. **æ³¨å†Œç»„ä»¶**ï¼šé€šè¿‡ `useComponentRegistry` æ³¨å†Œè‡ªå®šä¹‰ç»„ä»¶
3. **é›†æˆåˆ°è£…ä¿®ç•Œé¢**ï¼šåœ¨ç»„ä»¶åº“ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ç»„ä»¶

### 9.2 ä¸»é¢˜ç³»ç»Ÿ

æ”¯æŒé€šè¿‡ CSS å˜é‡å’Œä¸»é¢˜é…ç½®å®ç°å…¨å±€æ ·å¼å®šåˆ¶ï¼š

1. å®šä¹‰ä¸»é¢˜å˜é‡
2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ä¸»é¢˜å˜é‡
3. æä¾›ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½

## 10. éƒ¨ç½²ä¸å‘å¸ƒ

### 10.1 æ„å»ºæµç¨‹

1. **å¼€å‘ç¯å¢ƒ**ï¼š`npm run dev`
2. **æ„å»º**ï¼š`npm run build`
3. **é¢„è§ˆç”Ÿäº§æ„å»º**ï¼š`npm run preview`

### 10.2 éƒ¨ç½²ç­–ç•¥

- **åå°ç®¡ç†ç³»ç»Ÿ**ï¼šéƒ¨ç½²ä¸ºé™æ€ç½‘ç«™
- **å‰å°é¡µé¢**ï¼šéƒ¨ç½²ä¸º SSR åº”ç”¨
- **æ•°æ®å­˜å‚¨**ï¼šé¡µé¢é…ç½®å­˜å‚¨åœ¨åç«¯æ•°æ®åº“

## 11. æ•…éšœæ’æŸ¥

### 11.1 å¸¸è§é—®é¢˜

| é—®é¢˜                          | å¯èƒ½åŸå›                           | è§£å†³æ–¹æ¡ˆ                                  |
|-------------------------------|-----------------------------------|-------------------------------------------|
| ç»„ä»¶ä¸æ˜¾ç¤º                    | ç»„ä»¶æœªæ³¨å†Œæˆ–æ³¨å†Œå¤±è´¥              | æ£€æŸ¥ç»„ä»¶ç›®å½•ç»“æ„å’Œé…ç½®                     |
| å±æ€§ç¼–è¾‘ä¸ç”Ÿæ•ˆ                | å±æ€§ç±»å‹ä¸åŒ¹é…æˆ–é»˜è®¤å€¼è®¾ç½®é”™è¯¯    | æ£€æŸ¥ propertySchema é…ç½®                  |
| é¢„è§ˆé¡µé¢ç©ºç™½                  | é¡µé¢é…ç½®é”™è¯¯æˆ–ç»„ä»¶æ¸²æŸ“å¤±è´¥        | æ£€æŸ¥é¡µé¢é…ç½®å’Œç»„ä»¶å®ç°                     |
| ç»„ä»¶æ‹–æ‹½å¤±è´¥                  | æ‹–æ‹½ç³»ç»Ÿé…ç½®é”™è¯¯                  | æ£€æŸ¥ Builder ç»„ä»¶å®ç°                      |
| å›¾ç‰‡ä¸Šä¼ å¤±è´¥                  | OSS é…ç½®é”™è¯¯æˆ–ç½‘ç»œé—®é¢˜            | æ£€æŸ¥ OSS é…ç½®å’Œç½‘ç»œè¿æ¥                    |

### 11.2 è°ƒè¯•æŠ€å·§

1. **ç»„ä»¶æ³¨å†Œè°ƒè¯•**ï¼š
   ```bash
   # æŸ¥çœ‹ç»„ä»¶æ³¨å†Œæ—¥å¿—
   console.log('Registered components:', getComponentDefinitions())
   ```

2. **é¡µé¢é…ç½®è°ƒè¯•**ï¼š
   ```bash
   # æŸ¥çœ‹å½“å‰é¡µé¢é…ç½®
   console.log('Current page config:', pageStore.currentPage)
   ```

3. **ç»„ä»¶æ¸²æŸ“è°ƒè¯•**ï¼š
   ```bash
   # æ£€æŸ¥ç»„ä»¶æ˜¯å¦å­˜åœ¨
   console.log('Component exists:', isComponentRegistered('banner'))
   ```

## 12. æœªæ¥è§„åˆ’

### 12.1 åŠŸèƒ½æ‰©å±•

- [ ] æ¨¡æ¿ç³»ç»Ÿï¼šé¢„è®¾é¡µé¢æ¨¡æ¿
- [ ] A/B æµ‹è¯•ï¼šé¡µé¢ç‰ˆæœ¬å¯¹æ¯”
- [ ] å¤šè¯­è¨€æ”¯æŒï¼šå›½é™…åŒ–
- [ ] æƒé™ç³»ç»Ÿï¼šç»†ç²’åº¦æƒé™æ§åˆ¶
- [ ] æ•°æ®ç»‘å®šï¼šåŠ¨æ€æ•°æ®æ¥æº

### 12.2 æŠ€æœ¯å‡çº§

- [ ] æ”¯æŒ Vue 3 Composition API æœ€ä½³å®è·µ
- [ ] é›†æˆ TypeScript ä¸¥æ ¼æ¨¡å¼
- [ ] ä¼˜åŒ–æ„å»ºæ€§èƒ½
- [ ] æ”¯æŒ Server Components
- [ ] é›†æˆ AI è¾…åŠ©è£…ä¿®

## 13. é™„å½•

### 13.1 ç»„ä»¶ç±»å‹å‚è€ƒ

| ç»„ä»¶ç±»å‹       | æ˜¾ç¤ºåç§°         | åˆ†ç±»        | æè¿°                   |
|----------------|------------------|-------------|------------------------|
| banner         | å¹¿å‘Šæ¨ªå¹…         | promotion   | å¹¿å‘Šæ¨ªå¹…ç»„ä»¶           |
| carousel       | è½®æ’­å›¾           | content     | å›¾ç‰‡è½®æ’­ç»„ä»¶           |
| product-list   | äº§å“åˆ—è¡¨         | product     | äº§å“å±•ç¤ºåˆ—è¡¨           |
| navbar         | å¯¼èˆªæ            | navigation  | é¡µé¢å¯¼èˆªç»„ä»¶           |

### 13.2 API å‚è€ƒ

#### useComponentRegistry

```typescript
// æ³¨å†Œç»„ä»¶
await autoRegisterComponents(componentDirectories)

// è·å–ç»„ä»¶å®šä¹‰
const definitions = getComponentDefinitions()

// è·å–ç»„ä»¶é…ç½®
const config = getComponentConfig('banner')

// åŠ è½½ç»„ä»¶
const component = await loadComponentByType('banner')
```

#### usePageManager

```typescript
// åˆ›å»ºé¡µé¢
const page = await pageManager.createPage({
  name: 'é¦–é¡µ',
  slug: 'home'
})

// ä¿å­˜é¡µé¢
await pageManager.savePage(pageId, config)

// å‘å¸ƒé¡µé¢
await pageManager.publishPage(pageId)
```

### 13.3 é…ç½®ç¤ºä¾‹

#### å®Œæ•´é¡µé¢é…ç½®

```json
{
  "id": "page-1",
  "name": "é¦–é¡µ",
  "slug": "home",
  "title": "é¦–é¡µ - ç”µå•†ç½‘ç«™",
  "description": "ç”µå•†ç½‘ç«™é¦–é¡µ",
  "keywords": "ç”µå•†,è´­ç‰©,é¦–é¡µ",
  "components": [
    {
      "id": "comp-1",
      "type": "banner",
      "props": {
        "image": "https://example.com/banner.jpg",
        "title": "æ¬¢è¿æ¥åˆ°ç”µå•†ç½‘ç«™",
        "buttonText": "ç«‹å³è´­ç‰©"
      },
      "position": 0
    },
    {
      "id": "comp-2",
      "type": "product-list",
      "props": {
        "title": "çƒ­é—¨äº§å“",
        "products": []
      },
      "position": 1
    }
  ],
  "status": "published",
  "createdAt": "2024-01-01T00:00:00Z",
  "updatedAt": "2024-01-01T00:00:00Z"
}
```

## 14. æ€»ç»“

ç”µå•†è£…ä¿®å¼•æ“é€šè¿‡ç»„ä»¶åŒ–ã€é…ç½®é©±åŠ¨çš„è®¾è®¡ï¼Œå®ç°äº†å¯è§†åŒ–æ‹–æ‹½è£…ä¿®åŠŸèƒ½ï¼Œå¤§å¤§é™ä½äº†é¡µé¢æ„å»ºçš„æŠ€æœ¯é—¨æ§›ã€‚ç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ”¯æŒå¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²å„ç§ç”µå•†é¡µé¢ã€‚

é€šè¿‡æœ¬æ–‡æ¡£çš„æŒ‡å¯¼ï¼Œå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿä¸Šæ‰‹è£…ä¿®å¼•æ“çš„å¼€å‘å’Œæ‰©å±•ï¼Œä¸ºç”µå•†ç½‘ç«™æä¾›æ›´åŠ çµæ´»ã€é«˜æ•ˆçš„é¡µé¢æ„å»ºèƒ½åŠ›ã€‚